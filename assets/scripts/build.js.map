{"version":3,"sources":["webpack:///webpack/bootstrap 7ff1620c45f067aeeb0a","webpack:///./assets/scripts/main.js","webpack:///./assets/scripts/PPSlider.js","webpack:///./assets/scripts/common.js","webpack:///./assets/scripts/progressbar.js","webpack:///./assets/scripts/programActive.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;ACtCA;;AAEA;AACA;AACA;AACA;;;;;;;ACLA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,wBAAuB,uBAAuB;AAC9C;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,WAAU;AACV;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA,GAAE;;AAEF;;;;;;;ACvFA;;AAEA;;AAEA;AACA;AACA;AACA,IAAG;;;AAGH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA,MAAK;;;;AAIL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW;AACX;AACA;AACA;AACA;AACA,YAAW;AACX;AACA,QAAO;AACP;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG;;;AAGH;AACA;AACA,IAAG;;AAEH,EAAC;;AAED;AACA;AACA;AACA;;AAEA;AACA;AACA,IAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,IAAG;;AAEH;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,MAAK;;AAEL,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA,MAAK;AACL;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL,IAAG;AACH;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAY;AACZ;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA,yBAAwB,QAAQ,eAAe;AAC/C,8BAA6B,YAAY,WAAW;AACpD,8BAA6B,YAAY,WAAW;AACpD,8BAA6B,YAAY,eAAe;AACxD,8BAA6B,YAAY,eAAe;AACxD,WAAU,QAAQ,eAAe;;AAEjC;AACA;AACA;AACA,aAAY;AACZ;AACA;;;;;;;AC/SA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,kBAAiB;AACjB,uBAAsB;AACtB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,UAAS;;AAET;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;;;AAGP;AACA;AACA;AACA,cAAa;AACb,UAAS;;;AAGT;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA,cAAa;AACb,UAAS;;;AAGT;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA,UAAS;;AAET;AACA;AACA;AACA,UAAS;;AAET;AACA;;AAEA;;AAEA;AACA;;AAEA,EAAC;;;;;;;AC/GD;AACA;;AAEA;;AAEA,WAAU;;AAEV;AACA;AACA;AACA,IAAG;;AAEH;AACA,oBAAmB,sBAAsB;AACzC;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,UAAS;;AAET;AACA,QAAO;AACP,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,IAAG;;AAEH;AACA;AACA;;AAEA,MAAK;AACL;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;;AAEA,sB","file":"build.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 7ff1620c45f067aeeb0a\n **/","'use strict';\r\n\r\nrequire('./PPSlider');\r\nrequire('./common');\r\nrequire('./progressbar');\r\nrequire('./programActive');\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./assets/scripts/main.js\n ** module id = 0\n ** module chunks = 0\n **/","'use strict';\r\n\r\nwindow.volumeSlider = function (opts) {\r\n\r\n\tvar isMouseDown = false,\r\n\t\tcurrentVal = 0,\r\n\t\tcurrentFill = 0,\r\n\t\tstartMouseY,\r\n\t\tlastElemTop;\r\n\r\n\tvar startSlide = function (e) {\r\n\r\n\t\tisMouseDown = true;\r\n\t\tvar pos = getMousePosition(e);\r\n\t\tstartMouseY = pos.y;\r\n\t\tconsole.log($(this).offset().top, $(this).parent().offset().top);\r\n\t\t// ?\r\n\t\tlastElemTop = ($(this).offset().top - $(this).parent().offset().top);\r\n\t\tupdatePosition(e);\r\n\r\n\t\treturn false;\r\n\t};\r\n\r\n\tvar getMousePosition = function (e) {\r\n\t\t//container.animate({ scrollTop: rowHeight }, options.scrollSpeed, 'linear', ScrollComplete());\r\n\t\tvar posx = 0;\r\n\t\tvar posy = 0;\r\n\r\n\t\tif (!e) var e = window.event;\r\n\r\n\t\tif (e.pageX || e.pageY) {\r\n\t\t\tposx = e.pageX;\r\n\t\t\tposy = e.pageY;\r\n\t\t}\r\n\t\telse if (e.clientX || e.clientY) {\r\n\t\t\tposx = e.clientX + document.body.scrollLeft + document.documentElement.scrollLeft;\r\n\t\t\tposy = e.clientY + document.body.scrollTop  + document.documentElement.scrollTop;\r\n\t\t}\r\n\r\n\t\treturn { 'x': posx, 'y': posy };\r\n\t};\r\n\r\n\tvar updatePosition = function (e) {\r\n\t\tvar pos = getMousePosition(e);\r\n\r\n\t\tvar spanY = (pos.y - startMouseY);\r\n\r\n\t\tvar newPos = (lastElemTop + spanY);\r\n\t\t// ?\r\n\t\tvar upperBound = (opts.container.height()-opts.point.height());\r\n\r\n\t\tnewPos = Math.max(0,newPos);\r\n\t\tnewPos = Math.min(newPos,upperBound);\r\n\t\tcurrentVal = Math.round((newPos/upperBound)*100,0);\r\n\t\tcurrentFill = upperBound - newPos + opts.point.height()/2;\r\n\r\n\t\topts.point.css(\"top\", newPos);\r\n\t\topts.fill.css(\"height\", currentFill);\r\n\t\topts.tooltip.html(100-currentVal);\r\n\t\topts.callback(100-currentVal);\r\n\t};\r\n\r\n\tvar moving = function (e) {\r\n\t\tif(isMouseDown){\r\n\t\t\tupdatePosition(e);\r\n\t\t\treturn false;\r\n\t\t}\r\n\t};\r\n\r\n\tvar dropCallback = function (e) {\r\n\t\tisMouseDown = false;\r\n\t\topts.point.removeClass('moving');\r\n\t};\r\n\r\n\topts.point.bind('mousedown', startSlide);\r\n\r\n\t$(document).mousemove(function (e) {\r\n\t\tmoving(e);\r\n\t\tif ( isMouseDown ) {\r\n\t\t\topts.point.addClass('moving');\r\n\t\t}\r\n\t});\r\n\r\n\t$(document).mouseup(function (e) {\r\n\t\tdropCallback(e);\r\n\t});\r\n\r\n};\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./assets/scripts/PPSlider.js\n ** module id = 1\n ** module chunks = 0\n **/","window.SECTOR = window.SECTOR || {};\r\n\r\n$(document).ready(function() {\r\n\r\n  // buttons animation\r\n  $('#play').css({\r\n    backgroundSize: \"cover\"\r\n  });\r\n\r\n\r\n  if (/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent)) {\r\n    $('body').addClass('is_mobile');\r\n  }\r\n\r\n  // плеер\r\n  var current = $('.player__bitrate-active > .player__bitrate-name'),\r\n    current = {\r\n      channel: current.data('channel'),\r\n      source: current.attr('rel')\r\n    };\r\n\r\n  window.currentVolume = .75;\r\n\r\n  initPlayer(current.channel, current.source);\r\n\r\n  volumeSlider({\r\n    container: $('#volume .equalizer__container-line'),\r\n    point: $('#volume .equalizer__container-point'),\r\n    tooltip: $('#volume .player__volume-size'),\r\n    fill: $('#volume .equalizer__container-bg'),\r\n    callback: function(volume) {\r\n      window.currentVolume = volume / 100;\r\n      changeVolume(volume);\r\n    }\r\n  });\r\n\r\n  $('#play')\r\n    .click(function() {\r\n      if (!$(this).hasClass('pause')) {\r\n        buttonPlay(true);\r\n        $(\"#jplayer\").jPlayer('play');\r\n      } else {\r\n        buttonPlay(false);\r\n        $(\"#jplayer\").jPlayer('stop');\r\n      }\r\n    });\r\n\r\n\r\n\r\n  // изменение битрейта\r\n  $('#player-bitrate .player__bitrate-name').click(function() {\r\n    if ($(this).parent().hasClass('.player__bitrate-active')) {\r\n      return;\r\n    }\r\n\r\n    var bitrate = $('#player-bitrate'),\r\n      active = bitrate.find('.player__bitrate-active'),\r\n      value = parseInt($(this).prop('rel')),\r\n      channel = $(this).data('channel'),\r\n      current_value = parseInt(active.children('a').prop('rel')),\r\n      //percent = parseInt($(this).data('color')),\r\n      player = $(\"#jplayer\"),\r\n      play = $('#play'),\r\n      played = play.hasClass('pause');\r\n\r\n    animateBitrate($('#equalizer .' + current_value + 'k'), value, (\r\n      current_value < value ? 'up' : 'down'));\r\n    active.removeClass('player__bitrate-active');\r\n    $(this).parent().addClass('player__bitrate-active');\r\n    //changeColor(lighten($default_color, percent));\r\n\r\n    if (played) {\r\n      player.jPlayer(\"stop\");\r\n      play.removeClass('pause');\r\n    }\r\n\r\n    player.jPlayer(\"destroy\");\r\n    initPlayer(channel, value);\r\n\r\n    if (played) {\r\n      setTimeout(function() {\r\n        play.addClass('pause');\r\n        $(\"#jplayer\").jPlayer('play');\r\n      }, 250)\r\n    }\r\n  });\r\n\r\n  // скроллинг\r\n  /*\r\n  $('#history-block')\r\n      .height($(window).height())\r\n      .mCustomScrollbar({\r\n          mouseWheelPixels: 1000,\r\n          scrollButtons:{\r\n              enable: true\r\n          },\r\n          advanced:{\r\n              updateOnBrowserResize: true,\r\n              updateOnContentResize: true,\r\n              normalizeMouseWheelDelta: true\r\n          },\r\n          contentTouchScroll: true\r\n      });\r\n  */\r\n\r\n  $('#tabs .menu__list-item').click(function() {\r\n    if ($(this).hasClass('active')) {\r\n      return;\r\n    }\r\n    var index = $(this).index();\r\n    $('#tabs .menu__list-item.active').removeClass('active');\r\n    $(this).addClass('active');\r\n\r\n    $('#tabs_content > .active')\r\n      .removeClass('active')\r\n      .slideUp();\r\n\r\n    $($('#tabs_content > div')[index])\r\n      .addClass('active')\r\n      .slideDown();\r\n  });\r\n\r\n\r\n  $(window).bind('resize', function() {\r\n    $('body').css('width', $(document).width());\r\n  });\r\n\r\n});\r\n\r\nanimateBitrate = function(curr, rate, dir) {\r\n  var up = (dir === 'up'),\r\n    left = (up ? 0 : '-20px'),\r\n    next;\r\n\r\n  if (dir === 'up') {\r\n    next = curr.next();\r\n  } else {\r\n    next = curr.prev();\r\n  }\r\n\r\n  if (!up) {\r\n    curr.addClass('disabled');\r\n  }\r\n  curr.find('div:first > b').stop().animate({\r\n    left: left\r\n  }, 100);\r\n  curr.find('div:last').stop().animate({\r\n    left: left\r\n  }, 100, function() {\r\n    if (up) {\r\n      curr.removeClass('disabled');\r\n    }\r\n    if (!curr.hasClass(rate + 'k') && !(!up && curr.prev().hasClass(rate +\r\n        'k'))) {\r\n      animateBitrate(next, rate, dir);\r\n    } // else {\r\n    //   changeBitrate(up);\r\n    //}\r\n  });\r\n\r\n};\r\n\r\n/*changeBitrate = function(up) {\r\n    $('#equalizer > li').each(function(){\r\n        var current = parseInt($(this).attr('class').replace(/size(\\d+) (.+)/, '$1').replace('size', '')),\r\n            change = current + (up? 10 : -10);\r\n\r\n        console.log(current)\r\n\r\n        if (change <= 90 && change > 0) {\r\n            $(this)\r\n                .removeClass('size'+current)\r\n                .addClass('size'+change)\r\n        }\r\n\r\n    });\r\n\r\n}*/\r\n\r\ninitPlayer = function(channel, ices) {\r\n  $(\"#jplayer\").jPlayer({\r\n    volume: window.currentVolume,\r\n    ready: function() {\r\n      $(this).jPlayer(\"setMedia\", {\r\n        oga: \"http://89.223.45.5:8000/\" + channel + \"-\" + ices\r\n      });\r\n      // ready callback\r\n    },\r\n    swfPath: \"images\",\r\n    supplied: \"oga\"\r\n  });\r\n};\r\n\r\nchangeVolume = function(volume) {\r\n  $(\"#jplayer\").jPlayer(\"option\", \"volume\", window.currentVolume);\r\n};\r\n\r\n/*\r\ncheckTime = function() {\r\n    var now = new Date(),\r\n        hours = now.getHours(),\r\n        night = '#6A758D',\r\n        evening = '#20A0A5';\r\n\r\n    if(hours<7 || hours>22) {\r\n        changeColor(night);\r\n        return night;\r\n    } else if (hours>=7 && hours <= 12) {\r\n        changeColor(evening);\r\n        return evening;\r\n    }\r\n};\r\n\r\n\r\nchangeColor = function(color) {\r\n    $('body').css('background-color', color);\r\n    return color;\r\n}\r\n\r\n\r\nlighten = function (color, light) {\r\n    color = color.replace(/[^0-9,]+/g, \"\");\r\n    var red = color.split(\",\")[0];\r\n    var gre = color.split(\",\")[1];\r\n    var blu = color.split(\",\")[2];\r\n\r\n    var hsv = RgbToHsv(red,gre,blu);\r\n    var rgb = HsvToRgb(hsv.h, hsv.s, light);\r\n\r\n    return \"rgb(\" + rgb.r + \",\" + rgb.g + \",\" + rgb.b + \")\";\r\n}\r\n*/\r\n\r\n\r\n\r\nbuttonPlay = function($play) {\r\n  $('#play').stop().animate({\r\n    width: '70px',\r\n    height: '70px',\r\n    top: '5px',\r\n    left: '5px'\r\n  }, 50, function() {\r\n    if ($play)\r\n      $(this).addClass('pause');\r\n    else\r\n      $(this).removeClass('pause');\r\n    $(this).stop().animate({\r\n      width: '80px',\r\n      height: '80px',\r\n      top: 0,\r\n      left: 0\r\n    }, 70, 'easeOutCirc');\r\n  });\r\n};\r\n\r\n\r\n/* ----------------------------------\r\n\r\nfunction RgbToHsv(r, g, b) {\r\n    var min = Math.min(r, g, b),\r\n        max = Math.max(r, g, b),\r\n        delta = max - min,\r\n        h, s, v = max;\r\n\r\n    v = Math.floor(max / 255 * 100);\r\n    if (max == 0) return [0, 0, 0];\r\n    s = Math.floor(delta / max * 100);\r\n    var deltadiv = delta == 0 ? 1 : delta;\r\n    if( r == max ) h = (g - b) / deltadiv;\r\n    else if(g == max) h = 2 + (b - r) / deltadiv;\r\n    else h = 4 + (r - g) / deltadiv;\r\n    h = Math.floor(h * 60);\r\n    if( h < 0 ) h += 360;\r\n    return { h: h, s:s, v:v }\r\n}\r\n\r\nfunction HsvToRgb(h, s, v) {\r\n    h = h / 360;\r\n    s = s / 100;\r\n    v = v / 100;\r\n\r\n    if (s == 0)\r\n    {\r\n        var val = Math.round(v * 255);\r\n        return {r:val,g:val,b:val};\r\n    }\r\n    hPos = h * 6;\r\n    hPosBase = Math.floor(hPos);\r\n    base1 = v * (1 - s);\r\n    base2 = v * (1 - s * (hPos - hPosBase));\r\n    base3 = v * (1 - s * (1 - (hPos - hPosBase)));\r\n    if (hPosBase == 0) {red = v; green = base3; blue = base1}\r\n    else if (hPosBase == 1) {red = base2; green = v; blue = base1}\r\n    else if (hPosBase == 2) {red = base1; green = v; blue = base3}\r\n    else if (hPosBase == 3) {red = base1; green = base2; blue = v}\r\n    else if (hPosBase == 4) {red = base3; green = base1; blue = v}\r\n    else {red = v; green = base1; blue = base2};\r\n\r\n    red = Math.round(red * 255);\r\n    green = Math.round(green * 255);\r\n    blue = Math.round(blue * 255);\r\n    return {r:red,g:green,b:blue};\r\n}\r\n*/\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./assets/scripts/common.js\n ** module id = 2\n ** module chunks = 0\n **/","(function (SECTOR) {\r\n    'use strict';\r\n\r\n    var progress = {\r\n\r\n        /*  Use api instead of playtime.json, where:\r\n            timestamp - current server timestamp, unixtime (note that js need 1000 multiplier)\r\n            serverTime - server time when track was started playing, unixtime\r\n         */\r\n        //apiPoint: 'http://sectorradio.ru/api/track.php',\r\n\r\n        timer: {},\r\n        apiPromise: {},\r\n        url: 'http://sectorradio.ru/api/track.php',\r\n        needUpdate: false,\r\n        updateTimeout: 0,\r\n\r\n        init: function () {\r\n            this.addCanvas();\r\n            this.url += '?' + Date.now();\r\n            this.getPlaytime();\r\n            return this;\r\n        },\r\n\r\n      addCanvas: function() {\r\n        var cns = document.createElement('canvas');\r\n        var container = document.getElementById('player');\r\n\r\n        container.insertBefore(cns, container.firstChild);\r\n\r\n        cns.id = 'progress-bar';\r\n        cns.height = '140';\r\n        cns.width = '140';\r\n        cns.style.position = \"absolute\";\r\n        cns.style.top = \"50px\";\r\n        cns.style.left = \"50%\";\r\n        cns.style.marginLeft = \"-70px\";\r\n      },\r\n\r\n\r\n        startRender: function () {\r\n            this.interval = setInterval((function() {\r\n                this.renderBar();\r\n            }).bind(this), 66);\r\n        },\r\n\r\n\r\n        getPlaytime: function () {\r\n          this.apiPromise = fetch(this.url)\r\n            .then(function (response) {\r\n              return response.json();\r\n            })\r\n            .then((function (data) {\r\n              this.timer = data;\r\n              this.startRender();\r\n              return data;\r\n            }).bind(this));\r\n        },\r\n\r\n\r\n        renderBar: function () {\r\n            var now = new Date();\r\n            var currentTime = now - this.timer.serverTime * 1000;\r\n            var progress = currentTime / (this.timer.length * 1000);\r\n            var cns = document.getElementById('progress-bar');\r\n            var ctx = cns.getContext('2d');\r\n\r\n            ctx.save();\r\n            ctx.clearRect(0, 0, 140, 140);\r\n            ctx.translate(70, 70);\r\n            ctx.rotate(-Math.PI / 2);\r\n            ctx.lineWidth = 11;\r\n            ctx.lineCap = \"round\";\r\n\r\n            writeTime(ctx);\r\n\r\n            function writeTime(ctx) {\r\n                ctx.strokeStyle = 'rgba(255, 255, 255, .55)';\r\n                ctx.beginPath();\r\n                partialCircle(ctx, 0, 0, 54);\r\n                ctx.scale(1, 1);\r\n                ctx.stroke();\r\n                ctx.restore();\r\n            }\r\n\r\n            function partialCircle(ctx, x, y, rad) {\r\n                ctx.arc(x, y, rad, 0, progress * (Math.PI * 2), false);\r\n                return ctx;\r\n            }\r\n\r\n            if (progress > 1) {\r\n              clearInterval(this.interval);\r\n              this.updatePlaytime(this.updateTimeout);\r\n            } else {\r\n              this.updateTimeout = 0;\r\n            }\r\n        },\r\n\r\n      updatePlaytime: function (time) {\r\n        setTimeout((function () {\r\n          this.getPlaytime();\r\n        }).bind(this), time);\r\n\r\n        this.updateTimeout = 3000;\r\n      }\r\n\r\n    };\r\n\r\n    // TODO make module updateStatus from common.js and request nowplaying only when timer is ready\r\n    SECTOR.progress = progress.init();\r\n\r\n})(window.SECTOR);\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./assets/scripts/progressbar.js\n ** module id = 3\n ** module chunks = 0\n **/","window.programActive = {\r\n  rows: document.getElementsByClassName('programs__row'),\r\n\r\n  breakPoints: [],\r\n\r\n  time: {},\r\n\r\n  init: function () {\r\n    this.setBreakpoints();\r\n    this.getTimezone();\r\n  },\r\n\r\n  setBreakpoints: function () {\r\n    for (var i = 0; i < this.rows.length; i++) {\r\n      this.breakPoints.push(Number(this.rows[i].getAttribute('data-time')));\r\n    }\r\n  },\r\n\r\n  getTimezone: function () {\r\n    SECTOR.progress.apiPromise\r\n      .then((function (data) {\r\n        this.serverTime = data.timestamp;\r\n        this.updateServerTime();\r\n        clearInterval(this.interval);\r\n        \r\n        this.interval = setInterval((function() {\r\n          this.serverTime += 1;\r\n          this.updateServerTime();\r\n        }).bind(this), 1000);\r\n\r\n        this.setUpdateInterval(0);\r\n      }).bind(this));\r\n  },\r\n\r\n  updateServerTime: function () {\r\n    this.time.now = new Date(this.serverTime*1000);\r\n    this.time.hours = this.time.now.getHours();\r\n    this.time.minutes = this.time.now.getMinutes();\r\n    this.time.seconds = this.time.now.getSeconds();\r\n    this.time.moscowHours = ((this.time.hours + this.time.now.getTimezoneOffset()/60) + 3);\r\n  },\r\n\r\n  getBreakpoint: function () {\r\n    if (this.time.moscowHours % 2) {\r\n      this.nextBreakpointIn = (60 - this.time.seconds) * 1000 + (119 - this.time.minutes) * 60 * 1000;\r\n    } else {\r\n      this.nextBreakpointIn = (60 - this.time.seconds) * 1000 + (59 - this.time.minutes) * 60 * 1000;\r\n    }\r\n  },\r\n\r\n  getActiveRow: function () {\r\n    if (this.time.moscowHours % 2) {\r\n      this.activeRow = this.breakPoints.indexOf(this.time.moscowHours);\r\n\r\n    } else {\r\n      this.activeRow = this.breakPoints.indexOf(this.time.moscowHours - 1);\r\n    }\r\n  },\r\n\r\n  setUpdateInterval: function (time) {\r\n    setTimeout((function () {\r\n      if (time) {\r\n        this\r\n          .rows[this.activeRow]\r\n          .classList\r\n          .toggle('programs__row-active');\r\n      }\r\n      \r\n      this.getActiveRow();\r\n      this\r\n        .rows[this.activeRow]\r\n        .classList\r\n        .toggle('programs__row-active');\r\n\r\n      this.getBreakpoint();\r\n      if (NODE_ENV == 'development') {\r\n        console.log(this.nextBreakpointIn);\r\n      }\r\n      this.setUpdateInterval(this.nextBreakpointIn);\r\n    }).bind(this), time);\r\n  }\r\n};\r\n\r\nprogramActive.init();\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./assets/scripts/programActive.js\n ** module id = 4\n ** module chunks = 0\n **/"],"sourceRoot":""}